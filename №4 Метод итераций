#include <iostream>
#include <conio.h>
#include <cmath>
 
using namespace std;
 
double f(double x)
{
    return pow(x,2.0) - 20*sin(x);
}
 
int main()
{
    double a,b,eps,x,dx;
    do
    {
        std::cout<<"Enter diapazone[a;b] of iterations\r\n";
        std::cout<<"a = ";std::cin>>a;
        std::cout<<"b = ";std::cin>>b;
        std::cout<<"Enter accuracy e ";std::cin>>eps;
        //Шаг определяем по точности вычислений
        //Погрешность f(x[i]) - f(x[i - 1]) < x[i] - x[i - 1] = h
        dx = (b - a)*(eps/10);//Мин шаг точность/10
        x = a;
        //Вычисления останавливаем когда добиваемся
        //требуемой точности вычислений eps < fabs(f(x))
        //или же достигаем конца промежутка
        while(eps < fabs(f(x)) && x <= b)
            x += dx;
        if(b < x)
            std::cout<<"[a;b] isn't contain roots\r\n";
        else
        {
            std::cout<<"root      : "<<x<<"\r\n";
            std::cout<<"acuracy e : "<<fabs(f(x))<<"\r\n";
        }
        std::cout<<"Press Y for new input\r\n";
    }
    while(toupper(getch()) == 'Y');
    return 0;
}
